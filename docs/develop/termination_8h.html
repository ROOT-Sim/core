<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ROOT-Sim core: /home/runner/work/core/core/src/gvt/termination.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="flatdoc.css" rel="stylesheet" type="text/css"/>
<link href="inline-params.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ROOT-Sim core
   &#160;<span id="projectnumber">3.0.0-rc.2</span>
   </div>
   <div id="projectbrief">A General-Purpose Multi-threaded Parallel/Distributed Simulation Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a60e93a66d81cd0c6df7919d4947f80f.html">gvt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">termination.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Termination detection module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">core/core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lp_8h_source.html">lp/lp.h</a>&gt;</code><br />
<code>#include &lt;stdatomic.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for termination.h:</div>
<div class="dyncontent">
<div class="center"><img src="termination_8h__incl.png" border="0" usemap="#a_2home_2runner_2work_2core_2core_2src_2gvt_2termination_8h" alt=""/></div>
<map name="a_2home_2runner_2work_2core_2core_2src_2gvt_2termination_8h" id="a_2home_2runner_2work_2core_2core_2src_2gvt_2termination_8h">
<area shape="rect" title="Termination detection module." alt="" coords="823,5,1017,47"/>
<area shape="rect" href="core_8h.html" title="Core ROOT&#45;Sim functionalities." alt="" coords="622,468,717,495"/>
<area shape="rect" href="lp_8h.html" title="LP construction functions." alt="" coords="635,95,698,121"/>
<area shape="rect" title=" " alt="" coords="855,393,953,420"/>
<area shape="rect" title=" " alt="" coords="713,617,775,644"/>
<area shape="rect" title=" " alt="" coords="799,617,870,644"/>
<area shape="rect" title=" " alt="" coords="605,617,688,644"/>
<area shape="rect" title=" " alt="" coords="321,617,391,644"/>
<area shape="rect" href="ROOT-Sim_8h.html" title="ROOT&#45;Sim header for model development." alt="" coords="527,543,627,569"/>
<area shape="rect" title=" " alt="" coords="507,617,581,644"/>
<area shape="rect" title=" " alt="" coords="416,617,483,644"/>
<area shape="rect" title=" " alt="" coords="226,617,297,644"/>
<area shape="rect" href="platform_8h.html" title="Determine on what OS we are compiling." alt="" coords="5,543,128,569"/>
<area shape="rect" href="msg_8h.html" title="Message management functions." alt="" coords="705,319,783,345"/>
<area shape="rect" href="process_8h.html" title="LP state management functions." alt="" coords="529,244,629,271"/>
<area shape="rect" href="auto__ckpt_8h.html" title="Autonomic checkpoint interval selection header." alt="" coords="755,169,883,196"/>
<area shape="rect" href="model__allocator_8h.html" title="Memory management functions for simulation models." alt="" coords="407,169,575,196"/>
<area shape="rect" title=" " alt="" coords="271,543,345,569"/>
<area shape="rect" title=" " alt="" coords="507,393,578,420"/>
<area shape="rect" href="array_8h.html" title="Dynamic array datatype." alt="" coords="442,319,577,345"/>
<area shape="rect" href="mm_8h.html" title="Memory Manager main header." alt="" coords="337,393,428,420"/>
<area shape="rect" href="log_8h.html" title="Logging library." alt="" coords="519,468,598,495"/>
<area shape="rect" href="mem_8h.html" title="Platform specific memory utilities." alt="" coords="90,468,190,495"/>
<area shape="rect" title=" " alt="" coords="775,244,862,271"/>
<area shape="rect" href="multi_8h.html" title="Handling of multiple buddy systems." alt="" coords="271,244,414,271"/>
<area shape="rect" title=" " alt="" coords="180,319,255,345"/>
<area shape="rect" title=" " alt="" coords="279,319,366,345"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="termination_8h__dep__incl.png" border="0" usemap="#a_2home_2runner_2work_2core_2core_2src_2gvt_2termination_8hdep" alt=""/></div>
<map name="a_2home_2runner_2work_2core_2core_2src_2gvt_2termination_8hdep" id="a_2home_2runner_2work_2core_2core_2src_2gvt_2termination_8hdep">
<area shape="rect" title="Termination detection module." alt="" coords="1197,5,1391,47"/>
<area shape="rect" href="control__msg_8h.html" title="MPI remote control messages header." alt="" coords="824,95,1001,151"/>
<area shape="rect" href="termination_8c.html" title="Termination detection module." alt="" coords="1447,310,1640,351"/>
<area shape="rect" href="lp_8c.html" title="LP construction functions." alt="" coords="1332,102,1509,143"/>
<area shape="rect" href="control__msg_8c.html" title="MPI remote control messages module." alt="" coords="615,199,792,255"/>
<area shape="rect" href="mpi_8h.html" title="MPI Support Module." alt="" coords="817,206,1009,247"/>
<area shape="rect" href="mpi_8c.html" title="MPI Support Module." alt="" coords="5,310,196,351"/>
<area shape="rect" href="no__mpi_8c.html" title="MPI Support Module." alt="" coords="220,303,397,359"/>
<area shape="rect" href="gvt_8c.html" title="Global Virtual Time." alt="" coords="421,310,599,351"/>
<area shape="rect" href="init_8c.html" title="Initialization routines." alt="" coords="623,310,800,351"/>
<area shape="rect" href="stats_8c.html" title="Statistics module." alt="" coords="824,310,1001,351"/>
<area shape="rect" href="process_8c.html" title="LP state management functions." alt="" coords="1025,310,1203,351"/>
<area shape="rect" href="parallel_8c.html" title="Concurrent simulation engine." alt="" coords="1227,310,1422,351"/>
</map>
</div>
</div>
<p><a href="termination_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae79ea3e39aef842a2e3f84a3bc640f60"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#ae79ea3e39aef842a2e3f84a3bc640f60">termination_cant_end</a>()&#160;&#160;&#160;(atomic_load_explicit(&amp;<a class="el" href="termination_8h.html#add53767828129ccccc37c7d29c605113">nodes_to_end</a>, memory_order_relaxed) &gt; 0)</td></tr>
<tr class="memdesc:ae79ea3e39aef842a2e3f84a3bc640f60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the termination status of this simulation.  <a href="termination_8h.html#ae79ea3e39aef842a2e3f84a3bc640f60">More...</a><br /></td></tr>
<tr class="separator:ae79ea3e39aef842a2e3f84a3bc640f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac4d9011eb1b4943167ccb1d5e6bbd6bb"><td class="memItemLeft" align="right" valign="top"><a id="ac4d9011eb1b4943167ccb1d5e6bbd6bb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#ac4d9011eb1b4943167ccb1d5e6bbd6bb">termination_global_init</a> (void)</td></tr>
<tr class="memdesc:ac4d9011eb1b4943167ccb1d5e6bbd6bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the termination detection module node-wide. <br /></td></tr>
<tr class="separator:ac4d9011eb1b4943167ccb1d5e6bbd6bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ab1db640b9f40b079dd426485490d5"><td class="memItemLeft" align="right" valign="top"><a id="af5ab1db640b9f40b079dd426485490d5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#af5ab1db640b9f40b079dd426485490d5">termination_lp_init</a> (struct <a class="el" href="structlp__ctx.html">lp_ctx</a> *lp)</td></tr>
<tr class="memdesc:af5ab1db640b9f40b079dd426485490d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the termination detection module LP-wide. <br /></td></tr>
<tr class="separator:af5ab1db640b9f40b079dd426485490d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e2b016baea72fd9b0f3dbd5847c8d48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#a5e2b016baea72fd9b0f3dbd5847c8d48">termination_on_msg_process</a> (struct <a class="el" href="structlp__ctx.html">lp_ctx</a> *lp, <a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a> msg_time)</td></tr>
<tr class="memdesc:a5e2b016baea72fd9b0f3dbd5847c8d48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute termination operations after a new message has been processed.  <a href="termination_8h.html#a5e2b016baea72fd9b0f3dbd5847c8d48">More...</a><br /></td></tr>
<tr class="separator:a5e2b016baea72fd9b0f3dbd5847c8d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3935a5503667e9c5d9a802c38f1ba50b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#a3935a5503667e9c5d9a802c38f1ba50b">termination_on_gvt</a> (<a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a> current_gvt)</td></tr>
<tr class="memdesc:a3935a5503667e9c5d9a802c38f1ba50b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the termination module state after a GVT computation.  <a href="termination_8h.html#a3935a5503667e9c5d9a802c38f1ba50b">More...</a><br /></td></tr>
<tr class="separator:a3935a5503667e9c5d9a802c38f1ba50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eb6c308f4b8ea6cbdf5796e9e29522d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#a5eb6c308f4b8ea6cbdf5796e9e29522d">termination_on_lp_rollback</a> (struct <a class="el" href="structlp__ctx.html">lp_ctx</a> *lp, <a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a> msg_time)</td></tr>
<tr class="memdesc:a5eb6c308f4b8ea6cbdf5796e9e29522d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute termination operations after a LP has been rollbacked.  <a href="termination_8h.html#a5eb6c308f4b8ea6cbdf5796e9e29522d">More...</a><br /></td></tr>
<tr class="separator:a5eb6c308f4b8ea6cbdf5796e9e29522d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe62eb553d7030cc9e1697f57f008e5"><td class="memItemLeft" align="right" valign="top"><a id="a4fe62eb553d7030cc9e1697f57f008e5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#a4fe62eb553d7030cc9e1697f57f008e5">termination_on_ctrl_msg</a> (void)</td></tr>
<tr class="memdesc:a4fe62eb553d7030cc9e1697f57f008e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute termination operations after the receipt of a termination control message. <br /></td></tr>
<tr class="separator:a4fe62eb553d7030cc9e1697f57f008e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17ec49ac96ceedff4c809f8945c3cf2"><td class="memItemLeft" align="right" valign="top"><a id="aa17ec49ac96ceedff4c809f8945c3cf2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>termination_force</b> (void)</td></tr>
<tr class="separator:aa17ec49ac96ceedff4c809f8945c3cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:add53767828129ccccc37c7d29c605113"><td class="memItemLeft" align="right" valign="top"><a id="add53767828129ccccc37c7d29c605113"></a>
_Atomic <a class="el" href="core_8h.html#a6bbc54689d56c687d66a8e5b3374dfae">nid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="termination_8h.html#add53767828129ccccc37c7d29c605113">nodes_to_end</a></td></tr>
<tr class="memdesc:add53767828129ccccc37c7d29c605113"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of nodes that still need to continue running the simulation. <br /></td></tr>
<tr class="separator:add53767828129ccccc37c7d29c605113"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Termination detection module. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2008-2023 HPDCS Group <a href="https://hpdcs.github.io">https://hpdcs.github.io</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae79ea3e39aef842a2e3f84a3bc640f60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae79ea3e39aef842a2e3f84a3bc640f60">&#9670;&nbsp;</a></span>termination_cant_end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define termination_cant_end</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(atomic_load_explicit(&amp;<a class="el" href="termination_8h.html#add53767828129ccccc37c7d29c605113">nodes_to_end</a>, memory_order_relaxed) &gt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the termination status of this simulation. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the simulation must go on, false otherwise </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3935a5503667e9c5d9a802c38f1ba50b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3935a5503667e9c5d9a802c38f1ba50b">&#9670;&nbsp;</a></span>termination_on_gvt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void termination_on_gvt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>&#160;</td>
          <td class="paramname"><em>current_gvt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the termination module state after a GVT computation. </p>
<p>Here we check if the simulation, from the point of view of the current thread, can be terminated. If also all the other processing threads on the node are willing to end the simulation, a termination control message is broadcast to the other nodes. </p>

</div>
</div>
<a id="a5eb6c308f4b8ea6cbdf5796e9e29522d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eb6c308f4b8ea6cbdf5796e9e29522d">&#9670;&nbsp;</a></span>termination_on_lp_rollback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void termination_on_lp_rollback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlp__ctx.html">lp_ctx</a> *&#160;</td>
          <td class="paramname"><em>lp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>&#160;</td>
          <td class="paramname"><em>msg_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute termination operations after a LP has been rollbacked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg_time</td><td>the timestamp of the straggler or anti message which caused the rollback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e2b016baea72fd9b0f3dbd5847c8d48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e2b016baea72fd9b0f3dbd5847c8d48">&#9670;&nbsp;</a></span>termination_on_msg_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void termination_on_msg_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlp__ctx.html">lp_ctx</a> *&#160;</td>
          <td class="paramname"><em>lp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>&#160;</td>
          <td class="paramname"><em>msg_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute termination operations after a new message has been processed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg_time</td><td>the timestamp of the freshly processed message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
